<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard Links - Pro v4</title>

<style>
  :root{
    --bg:#eef6fb;
    --card:#ffffff;
    --accent:#1b75bb;
    --accent-2:#025e9a;
    --muted:#6b7785;
    --glass: rgba(255,255,255,0.6);
    --radius:14px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: Inter, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg,var(--bg),#eef3f8);
    color:#172033;
    padding:28px;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    max-width:1100px;
    margin:0 auto 22px;
  }

  .brand{
    display:flex;align-items:center;gap:14px;
  }
  .logo{
    width:52px;height:52px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:white;display:flex;align-items:center;justify-content:center;
    font-weight:700;font-size:22px;
  }

  .controls{display:flex;gap:10px;align-items:center}

  button.btn{
    padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600;
    background:linear-gradient(90deg,var(--accent-2),var(--accent));color:white;
  }
  button.ghost{
    background:transparent;border:1px solid rgba(23,32,51,0.06);
    padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer;
    color:var(--accent-2);
  }

  main{max-width:1100px;margin:0 auto}

  /* category */
  .category-row{
    margin-top:22px;
  }
  .category-header{
    display:flex;align-items:center;gap:12px;
  }

  .cat-bubble{
    width:44px;height:44px;border-radius:10px;background:var(--glass);
    display:flex;align-items:center;justify-content:center;font-size:20px;
  }

  .cat-title{font-size:20px;font-weight:700;margin-bottom:4px}
  .muted{font-size:13px;color:var(--muted)}

  /* cards */
  .cards{
    display:grid;
    grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    gap:14px;
    margin-top:12px;
  }

  .card{
    background: linear-gradient(180deg, rgba(255,255,255,0.9), var(--card));
    border-radius:12px;padding:14px;cursor:pointer;position:relative;
    min-height:86px;
    box-shadow: 0 6px 18px rgba(25,45,70,0.06);
    transition:transform .15s ease;
  }
  .card:hover{transform:translateY(-6px);}

  .card-icon{
    width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));
    color:white;display:flex;align-items:center;justify-content:center;font-size:20px;
    margin-bottom:10px;
  }

  .card-title{font-weight:700;font-size:15px}
  .card-url{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

  /* add card */
  .add-card{
    display:flex;align-items:center;justify-content:center;
    font-size:34px;
    background:linear-gradient(135deg,#e8f6ff,#ffffff);
    color:var(--accent-2);
    border:2px dashed rgba(27,117,187,0.12);
  }

  /* modal */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(0,0,0,0.4);
    display:none;align-items:center;justify-content:center;padding:20px;
  }
  .modal{
    width:400px;max-width:100%;background:white;border-radius:12px;padding:18px;
  }
  .modal h3{margin:0 0 10px}

  input, select{
    width:100%;padding:10px;margin-top:6px;border-radius:8px;
    border:1px solid #ccd6e3;font-size:14px;
  }

  .row{display:flex;gap:10px;margin-top:14px;justify-content:flex-end}

  /* responsive */
  @media(max-width:640px){
    .cards{grid-template-columns: repeat(auto-fill,minmax(160px,1fr))}
  }
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">DL</div>
    <div>
      <div class="cat-title" style="font-size:20px;">Dashboard Links - Pro</div>
      <div class="muted">Fast access to your teams & tools</div>
    </div>
  </div>

  <div class="controls">
    <button class="ghost" id="btnAddCategory">+ Add Category</button>
    <button class="btn" id="btnAddGlobalLink">+ Add Link</button>
    <button class="ghost" id="btnDeleteItem">ðŸ—‘ Delete</button>
  </div>
</header>

<main id="mainArea"></main>

<!-- MODAL -->
<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" id="modalContent"></div>
</div>

<script>
/* STORAGE */
const STORAGE_CATS = "cats_v4";
const STORAGE_LINKS = "links_v4";

let categories = JSON.parse(localStorage.getItem(STORAGE_CATS)) || [
  {id:"c1",name:"HR"},
  {id:"c2",name:"Production"},
  {id:"c3",name:"Finance"},
  {id:"c4",name:"IT"},
  {id:"c5",name:"Admin"}
];
let links = JSON.parse(localStorage.getItem(STORAGE_LINKS)) || [];

function save(){ localStorage.setItem(STORAGE_CATS,JSON.stringify(categories)); localStorage.setItem(STORAGE_LINKS,JSON.stringify(links)); }

function iconFor(cat){
  const map={HR:"ðŸ‘¨â€ðŸ’¼",Production:"ðŸ­",Finance:"ðŸ’°",IT:"ðŸ’»",Admin:"ðŸ¢"};
  return map[cat] || "ðŸ”—";
}

function uid(){return "id"+Math.random().toString(36).slice(2);}

/* RENDER */
function render(){
  const main=document.getElementById("mainArea");
  main.innerHTML="";

  categories.forEach(cat=>{
    const row=document.createElement("div");
    row.className="category-row";

    const head=document.createElement("div");
    head.className="category-header";
    head.innerHTML=`
      <div class="cat-bubble">${iconFor(cat.name)}</div>
      <div>
        <div class="cat-title">${cat.name}</div>
        <div class="muted">${links.filter(l=>l.category==cat.id).length} links</div>
      </div>`;
    row.appendChild(head);

    const cards=document.createElement("div");
    cards.className="cards";

    links.filter(l=>l.category==cat.id).forEach(l=>{
      const c=document.createElement("div");
      c.className="card";
      c.addEventListener("click",()=>window.open(l.url,"_blank"));
      c.innerHTML=`
        <div class="card-icon">${iconFor(cat.name)}</div>
        <div class="card-title">${l.title}</div>
        <div class="card-url">${l.url}</div>`;
      cards.appendChild(c);
    });

    const add=document.createElement("div");
    add.className="card add-card";
    add.textContent="+";
    add.onclick=()=>openLinkModal(cat.id);
    cards.appendChild(add);

    row.appendChild(cards);
    main.appendChild(row);
  });
}

/* MODAL */
const modalB=document.getElementById("modalBackdrop");
const modalC=document.getElementById("modalContent");
function openModal(html){
  modalC.innerHTML=html;
  modalB.style.display="flex";
}
modalB.onclick=e=>{ if(e.target===modalB) closeModal(); }
function closeModal(){ modalB.style.display="none"; }

/* ADD CATEGORY */
function openCatModal(){
  openModal(`
    <h3>Add Category</h3>
    <input id="catName" placeholder="Category name" />
    <div class="row"><button class="btn" id="saveCat">Save</button></div>
  `);
  document.getElementById("saveCat").onclick=()=>{
    const name=document.getElementById("catName").value.trim();
    if(!name) return alert("Enter name");
    categories.push({id:uid(),name});
    save(); closeModal(); render();
  };
}

/* ADD LINK */
function openLinkModal(catId){
  const opts=categories.map(c=>`<option value="${c.id}" ${c.id==catId?"selected":""}>${c.name}</option>`).join("");
  openModal(`
    <h3>Add Link</h3>
    <input id="lTitle" placeholder="Title" />
    <input id="lUrl" placeholder="https://..." />
    <select id="lCat">${opts}</select>
    <div class="row"><button class="btn" id="saveLink">Save</button></div>
  `);
  document.getElementById("saveLink").onclick=()=>{
    const t=document.getElementById("lTitle").value.trim();
    const u=document.getElementById("lUrl").value.trim();
    const c=document.getElementById("lCat").value;
    if(!t||!u) return alert("All fields required");
    links.push({id:uid(),title:t,url:u,category:c});
    save(); closeModal(); render();
  };
}

/* DELETE MENU */
function openDeleteModal(){
  const catOpts=categories.map(c=>`<option value="${c.id}">${c.name}</option>`).join("");
  const linkOpts=links.map(l=>`<option value="${l.id}">${l.title}</option>`).join("");

  openModal(`
    <h3>Delete</h3>

    <label><input type="radio" name="dtype" value="cat" checked /> Delete Category</label><br>
    <label><input type="radio" name="dtype" value="link" /> Delete Link</label>

    <div id="delSelectWrap" style="margin-top:12px;">
      <select id="delSelect">${catOpts}</select>
    </div>

    <div class="row">
      <button class="btn" style="background:#c0392b" id="doDelete">Delete</button>
    </div>
  `);

  const radios=document.querySelectorAll("input[name='dtype']");
  const wrap=document.getElementById("delSelectWrap");

  radios.forEach(r=>{
    r.onchange=()=>{
      const type=document.querySelector("input[name='dtype']:checked").value;
      wrap.innerHTML= type==="cat"
        ? `<select id="delSelect">${catOpts}</select>`
        : `<select id="delSelect">${linkOpts}</select>`;
    };
  });

  document.getElementById("doDelete").onclick=()=>{
    const type=document.querySelector("input[name='dtype']:checked").value;
    const id=document.getElementById("delSelect").value;

    if(type==="cat"){
      if(links.some(l=>l.category==id)){
        return alert("Category not empty");
      }
      categories = categories.filter(c=>c.id!=id);
    } else {
      links = links.filter(l=>l.id!=id);
    }

    save(); closeModal(); render();
  };
}

/* EVENTS */
document.getElementById("btnAddCategory").onclick=openCatModal;
document.getElementById("btnAddGlobalLink").onclick=()=>openLinkModal(categories[0]?.id);
document.getElementById("btnDeleteItem").onclick=openDeleteModal;

render();
</script>

</body>
</html>
